<!DOCTYPE html>
<html>
<head>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.1.1/jquery.min.js"></script>
  <script>
    function login() {
      var postData = {
        "servicePath" : "/security/authenticate",
        // Make sure you JSON encode (stringify) your request data. Web Service expects it (based on contract) to be encoded in JSON.
        "serviceRequest" : JSON.stringify({
          "username" : document.getElementById("username").value,
          "secretPassword" : document.getElementById("password").value
        })
      };


      // Debugging - Uncomment to check the data you are sending
      console.log("Sending request: " + JSON.stringify(postData));

      $.ajax({
        url: "http://astralqueen.bw.edu/~dwalsh12/Trello 2.0/webServices/services.php",
        type: 'post',
        data: postData,
        error: function(XMLHttpRequest, textStatus, errorThrown){
          console.log("Error occurred, please try again!" + XMLHttpRequest.status);
        },
        success: function(data) {
          // Debugging - Uncomment to check data you received
          console.log("Received response: " + data);

          // Parse data into response object
          var response = JSON.parse(data);

          // Set auth status
          document.getElementById("response").innerHTML = response.userId;

        }
      });
    }
    function createTask() {
        var taskData ={
            "servicePath" : "/tasks/createTasks",
            "serviceRequest" : JSON.stringify({
                "taskTitle" : document.getElementById("taskTitle").value
            })
        };

        console.log("Sending create Tasks: " + JSON.stringify(taskData));

        $.ajax({
            url: "http://astralqueen.bw.edu/~dwalsh12/Trello 2.0/webServices/services.php",
            type: 'post',
            data: taskData,
            error: function(XMLHttpRequest, textStatus, errorThrown){
                console.log("Error occurred, please try again!" + XMLHttpRequest.status);
            },
            success: function(data) {
                // Debugging - Uncomment to check data you received
                console.log("Received response: " + data);

                // Parse data into response object
                var response = JSON.parse(data);

                // Set auth status
                document.getElementById("taskResponse").innerHTML = response.TaskResponse;

            }
        });
    }

    function createUser() {
        var userData ={
            "servicePath": "/security/createUser",
            "serviceRequest" : JSON.stringify({
              "username" : document.getElementById("createUsername").value,
              "Password" : document.getElementById("createPassword").value,
              "Email" : document.getElementById("createEmail").value,
              "Verification" : document.getElementById("createVerification").value
            })
        };

        $.ajax({
            url: "http://astralqueen.bw.edu/~dwalsh12/Trello 2.0/webServices/services.php",
            type: 'post',
            data: userData,
            error: function(XMLHttpRequest, textStatus, errorThrown){
                console.log("Error occurred, please try again!" + XMLHttpRequest.status);
            },
            success: function(data) {
                // Debugging - Uncomment to check data you received
                console.log("Received response: " + data);

                var response = JSON.parse(data);

                document.getElementById("CreateUserResponse").innerHTML = response.createUser;

            }
        });

    }
  </script>
</head>
<body>

<h3>Login to Notes!</h3>

Enter your Username:
<input type="text" id="username"/>
<br />
Enter the secret password!
<input type="password" id="password"/>
<button onclick="login()">Login</button>
<div id="response">
</div>
<br />

<h3>Create an Account:</h3>
Username:
<input type="text" id="createUsername"/>
<br />
Password:
<input type="password" id="createPassword" />
<br />
Email:
<input type="text" id="createEmail" />
<br />
Verification Code:
<input type="text" id="createVerification" />
<button onclick="createUser()">Create User</button>

<br />
<div id="CreateUserResponse">
</div>
<br />
<br />
<br />

Please enter the Task Title:
<input type="text" id="taskTitle"/>
<button onclick="createTask()">Create Task</button>
<div id="taskResponse">
</div>

</body>
</html>